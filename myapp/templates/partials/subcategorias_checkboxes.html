{% if not subcategorias and request.GET.padre_id %}
    <p style="font-size: 0.9em; color: var(--color-text-secondary);">
        Esta categoría no tiene subgéneros.
    </p>
{% elif not subcategorias %}
     <p style="font-size: 0.9em; color: var(--color-text-secondary);">
        Selecciona una categoría principal para ver las opciones.
    </p>
{% endif %}

<ul id="id_{{ field_name }}" style="list-style-type: none; padding-left: 0; margin: 0; max-height: 200px; overflow-y: auto; background: var(--color-input-bg); border: 1px solid var(--color-input-border); border-radius: 6px; padding: 10px;">
    {% for subcategoria in subcategorias %}
        <li>
            <label for="id_{{ field_name }}_{{ forloop.counter0 }}">
                <input type="checkbox" 
                       name="{{ field_name }}" 
                       value="{{ subcategoria.pk }}" 
                       id="id_{{ field_name }}_{{ forloop.counter0 }}">
                {{ subcategoria.nombre }}
            </label>
        </li>
    {% endfor %}
</ul>