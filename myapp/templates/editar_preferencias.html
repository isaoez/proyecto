{% extends 'layout/base.html' %}

{% block content %}
<div class="card" style="padding: 20px; max-width: 600px; margin: 50px auto;">
    
    <h1>Mis Preferencias</h1>
    <p>Selecciona todos los géneros de artículos que te gustaría recibir a cambio.</p>

    <form method="POST">
        {% csrf_token %}
        
        {% if form.non_field_errors %}
            <div class="errorlist">{{ form.non_field_errors }}</div>
        {% endif %}

        <p>
            {{ form.categorias_buscadas.label_tag }}
            
            <div id="categorias_container">
                {{ form.categorias_buscadas }}
            </div>
            
            {% if form.categorias_buscadas.errors %}
                <div class="errorlist">{{ form.categorias_buscadas.errors }}</div>
            {% endif %}
        </p>
        
        <button type="submit" style="margin-top: 20px;">
            Guardar Preferencias
        </button>
    </form>
</div>

<style>
    form label {
        display: block;
        margin-bottom: 5px; /* Ajustado */
        font-weight: 600;
        color: var(--color-text-primary);
    }
    
    form p {
        margin-bottom: 20px;
    }

    form .errorlist {
        color: var(--color-error);
        background: var(--color-error-bg);
        border: 1px solid var(--color-error-border);
        padding: 10px 12px;
        border-radius: 6px;
        list-style-type: none;
        margin: 8px 0 0 0;
        padding-left: 12px;
        font-size: 0.9em;
    }
    
    /* Estilos para el <ul> que Django renderiza
       dentro de #categorias_container 
    */
    #categorias_container ul {
        list-style-type: none; 
        padding-left: 0; 
        margin: 0; 
        max-height: 300px; /* Más altura */
        overflow-y: auto; 
        background: var(--color-input-bg); 
        border: 1px solid var(--color-input-border); 
        border-radius: 6px; 
        padding: 10px;
    }
    
    #categorias_container ul li {
        padding: 2px 0; /* Un poco de espacio */
    }
</style>

{% endblock %}